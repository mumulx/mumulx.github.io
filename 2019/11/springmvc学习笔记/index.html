<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>
        SpringMVC自学笔记 - 木木的个人博客
      </title>
    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  
  <meta name="theme-color" content="#000000" />
  
  <meta http-equiv="window-target" content="_top" />
  
  
  <meta name="description" content="SpringMVC的学习记录." />
  <meta name="generator" content="Hugo 0.59.1 with theme pure" />
  <title>SpringMVC自学笔记 - 木木的个人博客</title>
  

  <link rel="stylesheet" href="https://mumulx.github.io/css/style.css">
  <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/9.15.10/styles/github.min.css"> 
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <meta property="og:title" content="SpringMVC自学笔记" />
<meta property="og:description" content="SpringMVC的学习记录." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mumulx.github.io/2019/11/springmvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" />
<meta property="article:published_time" content="2019-11-11T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-11-11T00:00:00+00:00" />

<meta itemprop="name" content="SpringMVC自学笔记">
<meta itemprop="description" content="SpringMVC的学习记录.">


<meta itemprop="datePublished" content="2019-11-11T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2019-11-11T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="14005">



<meta itemprop="keywords" content="Spring家族," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="SpringMVC自学笔记"/>
<meta name="twitter:description" content="SpringMVC的学习记录."/>

  <!--[if lte IE 9]>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
    <![endif]-->

  <!--[if lt IE 9]>
      <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->

</head>
  </head>
  

  <body class="main-center" itemscope itemtype="https://schema.org/WebPage"><header class="header" itemscope itemtype="https://schema.org/WPHeader">
    <div class="slimContent">
      <div class="navbar-header">
        <div class="profile-block text-center">
          <a id="avatar" href="https://github.com/mumulx" target="_blank">
            <img class="img-circle img-rotate" src="https://mumulx.github.io/avatar.png" width="200" height="200">
          </a>
          <h2 id="name" class="hidden-xs hidden-sm">木木就是两个木</h2>
          <h3 id="title" class="hidden-xs hidden-sm hidden-md">木木</h3>
          <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i>xuzhou, China</small>
        </div><div class="search" id="search-form-wrap">
    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i
                        class="icon icon-search"></i></button>
            </span>
        </div>
        <div class="ins-search">
            <div class="ins-search-mask"></div>
            <div class="ins-search-container">
                <div class="ins-input-wrapper">
                    <input type="text" class="ins-search-input" placeholder="想要查找什么..."
                        x-webkit-speech />
                    <button type="button" class="close ins-close ins-selectable" data-dismiss="modal"
                        aria-label="Close"><span aria-hidden="true">×</span></button>
                </div>
                <div class="ins-section-wrapper">
                    <div class="ins-section-container"></div>
                </div>
            </div>
        </div>
    </form>
</div>
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="https://schema.org/SiteNavigationElement" role="navigation">
        <ul class="nav navbar-nav main-nav">
            <li class="menu-item menu-item-home">
                <a href="/">
                    <i class="icon icon-home-fill"></i>
                  <span class="menu-title">Home</span>
                </a>
            </li>
            <li class="menu-item menu-item-archives">
                <a href="/posts">
                    <i class="icon icon-archives-fill"></i>
                  <span class="menu-title">Archives</span>
                </a>
            </li>
            <li class="menu-item menu-item-categories">
                <a href="/categories">
                    <i class="icon icon-folder"></i>
                  <span class="menu-title">Categories</span>
                </a>
            </li>
            <li class="menu-item menu-item-tags">
                <a href="/tags">
                    <i class="icon icon-tags"></i>
                  <span class="menu-title">Tags</span>
                </a>
            </li>
            <li class="menu-item menu-item-about">
                <a href="/about">
                    <i class="icon icon-cup-fill"></i>
                  <span class="menu-title">About</span>
                </a>
            </li>
        </ul>
      </nav>
    </div>
  </header>
  <aside class="sidebar" itemscope itemtype="https://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content"><p>我们的征途是星辰大海！</p>
            </div>
        </div>
    </div>
</div>

      <div class="widget">
    <h3 class="widget-title"> 分类</h3>
    <div class="widget-body">
        <ul class="category-list">
            <li class="category-list-item"><a href="https://mumulx.github.io/categories/%E6%8A%80%E6%9C%AF%E6%94%B6%E5%BD%95/" class="category-list-link">技术收录</a><span class="category-list-count">27</span></li>
            <li class="category-list-item"><a href="https://mumulx.github.io/categories/%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/" class="category-list-link">技术框架</a><span class="category-list-count">13</span></li>
            <li class="category-list-item"><a href="https://mumulx.github.io/categories/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB/" class="category-list-link">杂七杂八</a><span class="category-list-count">6</span></li>
            <li class="category-list-item"><a href="https://mumulx.github.io/categories/%E7%A7%81%E4%BA%BA%E5%8D%9A%E5%AE%A2/" class="category-list-link">私人博客</a><span class="category-list-count">1</span></li>
            <li class="category-list-item"><a href="https://mumulx.github.io/categories/%E9%97%AE%E9%A2%98%E6%94%B6%E5%BD%95/" class="category-list-link">问题收录</a><span class="category-list-count">2</span></li>
        </ul>
    </div>
</div>
      <div class="widget">
    <h3 class="widget-title"> 标签</h3>
    <div class="widget-body">
        <ul class="tag-list">
            
            
            <li class="tag-list-item"><a href="https://mumulx.github.io/tags/j2ee/" class="tag-list-link">j2ee</a><span
                    class="tag-list-count">3</span></li>
            
            
            <li class="tag-list-item"><a href="https://mumulx.github.io/tags/java/" class="tag-list-link">java</a><span
                    class="tag-list-count">11</span></li>
            
            
            <li class="tag-list-item"><a href="https://mumulx.github.io/tags/java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" class="tag-list-link">java并发编程</a><span
                    class="tag-list-count">5</span></li>
            
            
            <li class="tag-list-item"><a href="https://mumulx.github.io/tags/linux/" class="tag-list-link">linux</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://mumulx.github.io/tags/node/" class="tag-list-link">node</a><span
                    class="tag-list-count">2</span></li>
            
            
            <li class="tag-list-item"><a href="https://mumulx.github.io/tags/spring%E5%AE%B6%E6%97%8F/" class="tag-list-link">spring家族</a><span
                    class="tag-list-count">12</span></li>
            
            
            <li class="tag-list-item"><a href="https://mumulx.github.io/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" class="tag-list-link">中间件</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://mumulx.github.io/tags/%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98/" class="tag-list-link">其他问题</a><span
                    class="tag-list-count">2</span></li>
            
            
            <li class="tag-list-item"><a href="https://mumulx.github.io/tags/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/" class="tag-list-link">前端框架</a><span
                    class="tag-list-count">3</span></li>
            
            
            <li class="tag-list-item"><a href="https://mumulx.github.io/tags/%E5%BC%80%E5%8F%91%E8%BD%AF%E4%BB%B6/" class="tag-list-link">开发软件</a><span
                    class="tag-list-count">2</span></li>
            
            
            <li class="tag-list-item"><a href="https://mumulx.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="tag-list-link">数据库</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://mumulx.github.io/tags/%E6%97%A5%E8%AE%B0/" class="tag-list-link">日记</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://mumulx.github.io/tags/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB/" class="tag-list-link">杂七杂八</a><span
                    class="tag-list-count">8</span></li>
            
            
            <li class="tag-list-item"><a href="https://mumulx.github.io/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" class="tag-list-link">版本控制</a><span
                    class="tag-list-count">2</span></li>
            
        </ul>

    </div>
</div>
      
<div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
        <ul class="recent-post-list list-unstyled no-thumbnail">
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://mumulx.github.io/2020/06/%E5%A4%8D%E4%B9%A0%E6%80%BB%E7%BB%93/" class="title">复习知识点总结</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2020-06-09 00:00:00 &#43;0000 UTC" itemprop="datePublished">2020-06-09</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://mumulx.github.io/2020/05/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E4%B8%8Enio/" class="title">网络通信与NIO</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2020-05-30 00:00:00 &#43;0000 UTC" itemprop="datePublished">2020-05-30</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://mumulx.github.io/2020/05/onjava8/" class="title">OnJava8学习与理解</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2020-05-26 00:00:00 &#43;0000 UTC" itemprop="datePublished">2020-05-26</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://mumulx.github.io/2020/05/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="title">Java设计模式</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2020-05-21 00:00:00 &#43;0000 UTC" itemprop="datePublished">2020-05-21</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://mumulx.github.io/2020/05/java%E7%9F%A5%E8%AF%86%E7%82%B901/" class="title">Java知识点01</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2020-05-20 00:00:00 &#43;0000 UTC" itemprop="datePublished">2020-05-20</time>
                    </p>
                </div>
            </li>
        </ul>
    </div>
</div>
  </div>
</aside>

    
    
  <aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="https://schema.org/WPSideBar">
    <div class="slimContent">
      <nav id="toc" class="article-toc">
        <h3 class="toc-title">文章目录</h3>
        <div class="toc-content always-active"><nav id="TableOfContents">
<ul>
<li><a href="#springmvc">SpringMVC</a>
<ul>
<li><a href="#简介">简介</a></li>
<li><a href="#第一个springmvc程序">第一个SpringMVC程序</a>
<ul>
<li><a href="#jar">jar</a></li>
<li><a href="#springmvc配置文件-springmvc-xml">springmvc配置文件 springmvc.xml</a></li>
</ul></li>
<li><a href="#requestmapping">@RequestMapping</a></li>
<li><a href="#ant风格的请求路径">ant风格的请求路径</a>
<ul>
<li><a href="#pathvariable">@PathVariable</a></li>
</ul></li>
<li><a href="#rest风格-软件编程风格">REST风格 ：软件编程风格</a>
<ul>
<li>
<ul>
<li><a href="#delete与put">delete与put</a></li>
<li><a href="#springmvc实现-put-post请求方式的步骤">springmvc实现 ：put|post请求方式的步骤</a></li>
<li><a href="#delete">delete</a></li>
<li><a href="#put">put</a></li>
<li><a href="#get">get</a></li>
<li><a href="#post">post</a></li>
<li><a href="#处理delete-put的源码分析">处理delete|put的源码分析</a></li>
<li><a href="#普通传值">普通传值</a></li>
<li><a href="#获取请求头信息-requestheader">获取请求头信息 @RequestHeader</a></li>
</ul></li>
</ul></li>
<li><a href="#通过mvc获取cookie值-jsessionid">通过mvc获取cookie值（JSESSIONID）</a></li>
<li><a href="#使用对象-实体类student-接受请求参数">使用对象（实体类Student）接受请求参数</a></li>
<li><a href="#initbinder注解">@InitBinder注解</a></li>
<li><a href="#在springmvc中使用原生态的servlet-api">在SpringMVC中使用原生态的Servlet API</a></li>
<li><a href="#处理模型数据">处理模型数据</a>
<ul>
<li>
<ul>
<li><a href="#modelandview">ModelAndView</a></li>
<li><a href="#modelmap">ModelMap</a></li>
<li><a href="#map">Map</a></li>
<li><a href="#model">Model</a></li>
<li><a href="#如何将上述数据放入session中">如何将上述数据放入session中</a></li>
</ul></li>
</ul></li>
<li><a href="#modelattribute">@ModelAttribute</a></li>
<li><a href="#视图-视图解析器">视图、视图解析器</a>
<ul>
<li>
<ul>
<li><a href="#具体实现国际化步骤">具体实现国际化步骤：</a></li>
</ul></li>
<li><a href="#internalresourceviewresolver其他功能">InternalResourceViewResolver其他功能：</a>
<ul>
<li><a href="#mvc-view-controller"><code>&lt;mvc:view-controller ...&gt;</code></a></li>
</ul></li>
</ul></li>
<li><a href="#指定请求方式">指定请求方式</a></li>
<li><a href="#处理静态资源">处理静态资源：</a></li>
<li><a href="#类型转换">类型转换</a>
<ul>
<li>
<ul>
<li><a href="#spring自带一些-常见的类型转换器">Spring自带一些 常见的类型转换器</a></li>
<li><a href="#可以自定义类型转换器">可以自定义类型转换器</a></li>
</ul></li>
</ul></li>
<li><a href="#数据格式化">数据格式化</a>
<ul>
<li><a href="#错误消息">错误消息：</a></li>
</ul></li>
<li><a href="#数据校验">数据校验</a>
<ul>
<li>
<ul>
<li><a href="#jar-1">jar</a></li>
<li><a href="#配置springmvc-xml">配置springMVC.xml</a></li>
<li><a href="#直接使用注解">直接使用注解</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
        </div>
      </nav>
    </div>
  </aside>
<main class="main" role="main"><div class="content">
  <article id="-" class="article article-type-" itemscope
    itemtype="https://schema.org/BlogPosting">
    
    <div class="article-header">
      <h1 itemprop="name">
  <a
    class="article-title"
    href="/2019/11/springmvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
    >SpringMVC自学笔记</a
  >
</h1>

      <div class="article-meta">
        <span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://mumulx.github.io/2019/11/springmvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
  <time datetime="2019-11-11 00:00:00 &#43;0000 UTC" itemprop="datePublished">2019-11-11</time>
</a>
</span><span class="article-category">
  <i class="icon icon-folder"></i>
  <a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"> 技术框架 </a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/spring%E5%AE%B6%E6%97%8F/"> Spring家族 </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2019/11/springmvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#comments"
            class="article-comment-link">评论</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计:14005字</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长:28分 </span>
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      

<p><a href="https://github.com/mumulx/Project-source-code/tree/master/springMVC/SpringMVCProject">git源码</a></p>

<h1 id="springmvc">SpringMVC</h1>

<h2 id="简介">简介</h2>

<p>Servlet发展史</p>

<p>Struts1.x&ndash;&gt;Struts2.x&ndash;&gt;SpringMVC</p>

<p>springmvc:</p>

<h2 id="第一个springmvc程序">第一个SpringMVC程序</h2>

<h3 id="jar">jar</h3>

<pre><code>spring-aop.jar
spring-bean.jar
spring-context.jar
spring-core.jar
spring-web.jar
spring-webmvc.jar
commons-logging.jar
</code></pre>

<p>报错NoClassDefFoundError：缺少jar</p>

<pre><code>Servet - Springmvc
jsp -&gt;Servlet (Springmvc)-&gt;Jsp
</code></pre>

<p>url</p>

<h3 id="springmvc配置文件-springmvc-xml">springmvc配置文件 springmvc.xml</h3>

<p>选中常用的命名空间：beans  aop context  mvc</p>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
    xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.3.xsd&quot;&gt;

    &lt;!-- 扫描 有注解的包 --&gt;
    &lt;context:component-scan base-package=&quot;org.lanqiao.handler&quot;&gt;&lt;/context:component-scan&gt;

    &lt;!--配置视图解析器(InternalResourceViewResolver)  
    配置的prefix和suffix会给所有返回的地址加上前缀/views/加上后缀.jsp。
    例return &quot;success&quot;
    实际的结果为/views/success.jsp
    --&gt;
    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;
        &lt;property name=&quot;prefix&quot; value=&quot;/views/&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
&lt;/beans&gt;
</code></pre>

<p>普通的servlet流程：</p>

<p>请求-url-pattern -交给对应的servlet去处理</p>

<p>如果现在想用springmvc，而不是普通的servlet，如何告知程序？-如何让springmvc 介入程序：</p>

<p>需要配置一个 Springmvc自带的servlet</p>

<p>通过以下配置，拦截所有请求，交给SpringMVC处理：web.xml</p>

<pre><code class="language-xml">&lt;servlet&gt;
    &lt;servlet-name&gt;springDispatcherServlet&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
    &lt;init-param&gt;
            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
            &lt;param-value&gt;classpath:springmvc.xml&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;springDispatcherServlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</code></pre>

<p>其中：</p>

<pre><code>&lt;url-pattern&gt;.action&lt;/url-pattern&gt;

/               :一切请求  ，注意不是 /*
/user           :拦截以 /user开头的请求
/user/abc.do    :只拦截该请求
.action         :只拦截 .action结尾的请求
</code></pre>

<p>通过</p>

<pre><code class="language-xml">&lt;init-param&gt;
    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
    &lt;param-value&gt;classpath:springmvc.xml&lt;/param-value&gt;
&lt;/init-param&gt;
</code></pre>

<p>指定springmvc配置文件的路径，如果要省略，必须放到 默认路径：</p>

<pre><code>/WEB-INF/springDispatcherServlet-servlet.xml
</code></pre>

<p>严格的来说是</p>

<pre><code class="language-xml">&lt;servlet&gt;
    &lt;servlet-name&gt;springDispatcherServlet&lt;/servlet-name&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;springDispatcherServlet&lt;/servlet-name&gt;

/WEB-INF/servetname的值-servlet.xml
</code></pre>

<p>请求</p>

<pre><code class="language-html">&lt;a href=&quot;welcome&quot;&gt;first springmvc - welcome&lt;/a&gt;
</code></pre>

<p>servlet</p>

<pre><code class="language-java">@RequestMapping(value=&quot;welcome&quot;,method=RequestMethod.POST,params= {&quot;name=zs&quot;,&quot;age!=23&quot;,&quot;!height&quot;})//映射
public String  welcome() {
    return &quot;success&quot; ;//  views/success.jsp
}
</code></pre>

<p>项目中同时兼容 springMVC和Servlet</p>

<pre><code class="language-xml">&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;springDispatcherServlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;.action&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</code></pre>

<h2 id="requestmapping">@RequestMapping</h2>

<p>映射是 去匹配@RequestMapping注解，可以和方法名、类名不一致，</p>

<pre><code class="language-java">//接口/类    注解   配置
@Controller
@RequestMapping(value=&quot;handler&quot;) //映射
public class SpringMVCHandler {
    @RequestMapping(value=&quot;welcome&quot;)//映射
    public String  welcome() {
        return &quot;success&quot; ;
    }
}
</code></pre>

<p>默认值的属性为value</p>

<pre><code class="language-java">@RequestMapping(value=&quot;welcome&quot;)
@RequestMapping(&quot;welcome&quot;)
</code></pre>

<p>二者相等</p>

<p>此时请求的路径为</p>

<pre><code>handler/welcome
</code></pre>

<p>先去找类前面的，再去找方法前面的，默认使用了 请求转发的 跳转方式，地址栏的地址没有改变</p>

<p>method</p>

<p>通过method指定 请求方式（get  post  delete put）</p>

<pre><code class="language-java">@RequestMapping(value=&quot;welcome&quot;,method=RequestMethod.POST)//映射
</code></pre>

<p>params</p>

<p>参数值</p>

<pre><code class="language-java">params= {&quot;name&quot;}
</code></pre>

<p>请求参数值中一定要有name属性</p>

<pre><code class="language-java">params= {&quot;name=zs&quot;}
</code></pre>

<p>请求参数值中一定要有name属性，并且参数值一定是zs
    params= {&ldquo;name=zs&rdquo;,&ldquo;age!=23&rdquo;})</p>

<ul>
<li><p>name:必须有name=&ldquo;zs&rdquo;参数</p></li>

<li><p>age!=23 :</p>

<ol>
<li>如果有name=&ldquo;age&rdquo;，则age值不能是23</li>

<li><p>要么没有age</p>

<pre><code class="language-java">params= {&quot;name=zs&quot;,&quot;age!=23&quot;,&quot;!height&quot;})
</code></pre>

<p>请求参数中不能有height</p></li>
</ol></li>
</ul>

<p>headers</p>

<p>请求头</p>

<pre><code class="language-java">headers= {&quot;Accept=text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&quot;,&quot;Accept-Encoding=gzip, deflate&quot;}
</code></pre>

<p>多个参数使用<code>,</code>隔开</p>

<h2 id="ant风格的请求路径">ant风格的请求路径</h2>

<pre><code>?  单字符
*  任意个字符（0或多个）
** 任意目录
</code></pre>

<pre><code class="language-java">@RequestMapping(value=&quot;welcome3/a?c/test&quot;)
</code></pre>

<p>接受示例：</p>

<pre><code>    a href=&quot;welcome3/axc/test&quot;
    a href=&quot;welcome3/ayc/test&quot;
</code></pre>

<pre><code class="language-java">@RequestMapping(value=&quot;welcome3/*/test&quot;)
</code></pre>

<p>接受示例：</p>

<pre><code>a href=&quot;welcome3/abc/test&quot;
a href=&quot;welcome3/xxx/test&quot;
</code></pre>

<pre><code class="language-java">@RequestMapping(value=&quot;welcome3/**/test&quot;)
</code></pre>

<p>接受示例：</p>

<pre><code>a href=&quot;welcome3/abc/xyz/abccc/test&quot;
a href=&quot;welcome3/xxx/xxx/xxx/test&quot;
</code></pre>

<h3 id="pathvariable">@PathVariable</h3>

<p>通过@PathVariable获取动态参数</p>

<p>传参</p>

<pre><code class="language-html">&lt;a href=&quot;hander/welcome5/zs&quot;&gt;
</code></pre>

<p>zs为传递的值</p>

<pre><code class="language-java">@RequestMapping(value=&quot;welcome5/{name}&quot;)
public String  welcome5(@PathVariable(&quot;name&quot;) String name ) {
    System.out.println(name);
    return &quot;success&quot; ;
}
</code></pre>

<p>name的值为zs</p>

<h2 id="rest风格-软件编程风格">REST风格 ：软件编程风格</h2>

<p>conf.xml快速生成配置文件</p>

<pre><code>ctrl+/  选择#dispatcherservlet
</code></pre>

<p>然后修改拦截请求，和配置文件的位置</p>

<p>Springmvc:</p>

<pre><code>GET     :查
POST    :增
DELETE  :删
PUT     :改
</code></pre>

<h4 id="delete与put">delete与put</h4>

<p>普通浏览器 只支持<code>get</code> <code>post</code>方式 ；其他请求方式 如 <code>delelte</code> | <code>put</code>请求是通过过滤器（HiddenHttpMethodFilter）新加入的支持。</p>

<p>过滤器拦截delelte|put请求的条件</p>

<ol>
<li><p>请求方式为post</p></li>

<li><p>标签有隐藏域，并且隐藏域的name为_method,value为delete或put</p>

<pre><code class="language-html">&lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;delete|put&quot;&gt;
</code></pre></li>
</ol>

<h4 id="springmvc实现-put-post请求方式的步骤">springmvc实现 ：put|post请求方式的步骤</h4>

<p>增加过滤器,web.xml</p>

<pre><code class="language-xml">&lt;!-- 增加HiddenHttpMethodFilte过滤器：目的是给普通浏览器 增加 put|delete请求方式 --&gt;
&lt;filter&gt;
    &lt;filter-name&gt;HiddenHttpMethodFilte&lt;/filter-name&gt;
    &lt;filter-class&gt;org.springframework.web.filter.HiddenHttpMethodFilter&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;HiddenHttpMethodFilte&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
</code></pre>

<h4 id="delete">delete</h4>

<p>表单</p>

<pre><code class="language-html">&lt;form action=&quot;handler/testRest/1234&quot; method=&quot;post&quot;&gt;
    &lt;input type=&quot;hidden&quot;  name=&quot;_method&quot; value=&quot;DELETE&quot;/&gt;
    &lt;input type=&quot;submit&quot; value=&quot;删&quot;&gt;
&lt;/form&gt;
</code></pre>

<p>控制器</p>

<pre><code class="language-java">
@RequestMapping(value=&quot;testRest/{id}&quot;,method=RequestMethod.DELETE)
public String  testDelete(@PathVariable(&quot;id&quot;) Integer id) {
    System.out.println(&quot;delete：删 &quot; +id);
    return &quot;success&quot; ;
}
</code></pre>

<h4 id="put">put</h4>

<p>表单</p>

<pre><code class="language-html">&lt;form action=&quot;handler/testRest/1234&quot; method=&quot;post&quot;&gt;
    &lt;input type=&quot;hidden&quot;  name=&quot;_method&quot; value=&quot;PUT&quot;/&gt;
    &lt;input type=&quot;submit&quot; value=&quot;改&quot;&gt;
&lt;/form&gt;
</code></pre>

<p>控制器</p>

<pre><code class="language-java">@RequestMapping(value=&quot;testRest/{id}&quot;,method=RequestMethod.PUT)
public String  testPut(@PathVariable(&quot;id&quot;) Integer id) {
    System.out.println(&quot;put：改 &quot;+id);
    return &quot;success&quot; ;
}
</code></pre>

<h4 id="get">get</h4>

<p>表单</p>

<pre><code class="language-html">&lt;form action=&quot;handler/testRest/1234&quot; method=&quot;get&quot;&gt;
    &lt;input type=&quot;submit&quot; value=&quot;查&quot;&gt;
&lt;/form&gt;
</code></pre>

<p>控制器</p>

<pre><code class="language-java">@RequestMapping(value=&quot;testRest/{id}&quot;,method=RequestMethod.GET)
public String  testGet(@PathVariable(&quot;id&quot;) Integer id) {
    System.out.println(&quot;get：查 &quot; +id);
    return &quot;success&quot; ;
}
</code></pre>

<h4 id="post">post</h4>

<p>表单</p>

<pre><code class="language-html">&lt;form action=&quot;handler/testRest/1234&quot; method=&quot;post&quot;&gt;
    &lt;input type=&quot;submit&quot; value=&quot;增&quot;&gt;
&lt;/form&gt;
</code></pre>

<p>控制器</p>

<pre><code class="language-java">@RequestMapping(value=&quot;testRest/{id}&quot;,method=RequestMethod.POST)
public String  testPost(@PathVariable(&quot;id&quot;) Integer id) {
    System.out.println(&quot;post：增 &quot; +id);
    return &quot;success&quot; ;
}
</code></pre>

<p>通过<code>method=RequestMethod.DELETE</code>匹配具体的请求方式</p>

<p>此外，可以发现 ，当映射名相同时即<code>@RequestMapping(value=&quot;testRest)</code>相同，可以通过method处理不同的请求。</p>

<h4 id="处理delete-put的源码分析">处理delete|put的源码分析</h4>

<p>过滤器中 处理put|delete请求的部分源码：</p>

<pre><code class="language-java">protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)throws ServletException, IOException {
    HttpServletRequest requestToUse = request;
    if (&quot;POST&quot;.equals(request.getMethod()) &amp;&amp; request.getAttribute(WebUtils.ERROR_EXCEPTION_ATTRIBUTE) == null) {
        String paramValue = request.getParameter(this.methodParam);
        if (StringUtils.hasLength(paramValue)) {
            requestToUse = new HttpMethodRequestWrapper(request, paramValue);
        }
    }
    filterChain.doFilter(requestToUse, response);
}
</code></pre>

<p>原始请求：request，改请求默认只支持get\ post \ header]</p>

<p>但是如果 是&rdquo;POST&rdquo;  并且有隐藏域</p>

<pre><code class="language-html">&lt;input type=&quot;hidden&quot;  name=&quot;_method&quot; value=&quot;DELETE&quot;/&gt;
</code></pre>

<p>则，过滤器 将原始的请求 request加入新的请求方式DELETE，并将原始请求 转为 requestToUse 请求（request+Delete请求）</p>

<p>最后将requestToUse 放入 请求链中， 后续再事情request时 实际就使用改造后的 requestToUse</p>

<h4 id="普通传值">普通传值</h4>

<p>表单</p>

<pre><code class="language-html">&lt;form action=&quot;handler/testParam&quot; method=&quot;get&quot;&gt;
    name:&lt;input name=&quot;uname&quot; type=&quot;text&quot; /&gt;
    &lt;input type=&quot;submit&quot; value=&quot;查&quot;&gt;
&lt;/form&gt;
</code></pre>

<p>控制器</p>

<pre><code class="language-java">@RequestMapping(value=&quot;testParam&quot;)
public String  testParam(@RequestParam(&quot;uname&quot;) String name) {
    String name = request.getParameter(&quot;uname&quot;);
    System.out.println(name);
    return &quot;success&quot; ;
}
</code></pre>

<p>前台传多个参数值，后台可以接收其中几个值，但是不可以接收多的值，即后台接收的的值，前台一定要发送；前台发送的值，后台可以不接收</p>

<pre><code class="language-java">@RequestParam(&quot;uname&quot;) String name,@RequestParam(value=&quot;uage&quot;,required=false,defaultValue=&quot;23&quot;)
</code></pre>

<p>设置默认值，不传的时候为23</p>

<pre><code class="language-java">@RequestParam(&quot;uname&quot;)
</code></pre>

<p>接受前台传递的值，等价于</p>

<pre><code class="language-java">request.getParameter(&quot;uname&quot;);
</code></pre>

<pre><code class="language-java">required=false:该属性 不是必须的。
defaultValue=&quot;23&quot;：默认值23
</code></pre>

<h4 id="获取请求头信息-requestheader">获取请求头信息 @RequestHeader</h4>

<pre><code class="language-html">&lt;a href=&quot;handler/testRequestHeader&quot;&gt;testRequestHeader&lt;/a&gt;
</code></pre>

<pre><code class="language-java">public String  testRequestHeader(@RequestHeader(&quot;Accept-Language&quot;) String al ) {}
</code></pre>

<p>通过<code>@RequestHeader(&quot;Accept-Language&quot;)  String al</code> 获取请求头中的<code>Accept-Language</code>值，并将值保存再al变量中</p>

<h2 id="通过mvc获取cookie值-jsessionid">通过mvc获取cookie值（JSESSIONID）</h2>

<p>@CookieValue
(前置知识： 服务端在接受客户端第一次请求时，会给该客户端分配一个session （该session包含一个sessionId）),并且服务端会在第一次响应客户端时 ，将该sessionId赋值给JSESSIONID 并传递给客户端的cookie中</p>

<pre><code class="language-html">&lt;a href=&quot;handler/testCookieValue&quot;&gt;testCookieValue&lt;/a&gt;&lt;br/&gt;
</code></pre>

<pre><code class="language-java">@RequestMapping(value=&quot;testRequestHeader&quot;)
public String  testRequestHeader(@RequestHeader(&quot;Accept-Language&quot;)  String al  ) {
    System.out.println( al);
    return &quot;success&quot; ;
}
</code></pre>

<p>小结：</p>

<p>SpringMVC处理各种参数的流程/逻辑：</p>

<p>请求：  前端发请求a-&gt; @RequestMappting(&ldquo;a&rdquo;)</p>

<p>处理请求中的参数xyz：</p>

<pre><code class="language-java">@RequestMappting(&quot;a&quot;) 
public String  aa(@Xxx注解(&quot;xyz&quot;)  xyz)
{
}
</code></pre>

<h2 id="使用对象-实体类student-接受请求参数">使用对象（实体类Student）接受请求参数</h2>

<pre><code class="language-java">public class Student {
    private int id;
    private String name;
    private Address address ;
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public Address getAddress() {
        return address;
    }
    public void setAddress(Address address) {
        this.address = address;
    }

}
</code></pre>

<pre><code class="language-java">public class Address {
    private String homeAddress ; 
    private String schoolAddress ;
    public String getHomeAddress() {
        return homeAddress;
    }
    public void setHomeAddress(String homeAddress) {
        this.homeAddress = homeAddress;
    }
    public String getSchoolAddress() {
        return schoolAddress;
    }
    public void setSchoolAddress(String schoolAddress) {
        this.schoolAddress = schoolAddress;
    }
}
</code></pre>

<pre><code class="language-html">&lt;form action=&quot;handler/testObjectProperties&quot; method=&quot;post&quot;&gt;
    id:&lt;input name=&quot;id&quot; type=&quot;text&quot; /&gt;
    name:&lt;input name=&quot;name&quot; type=&quot;text&quot; /&gt;
    家庭地址:&lt;input name=&quot;address.homeAddress&quot; type=&quot;text&quot; /&gt;
    学校地址:&lt;input name=&quot;address.schoolAddress&quot; type=&quot;text&quot; /&gt;
    &lt;input type=&quot;submit&quot; value=&quot;查&quot;&gt;
&lt;/form&gt;
</code></pre>

<pre><code class="language-java">@RequestMapping(value=&quot;testObjectProperties&quot;)
public String  testObjectProperties(Student student) {//student属性 必须 和 form表单中的属性Name值一致（支持级联属性）
/* 以前的方式
    String name = 	request.getParameter(&quot;name&quot;);
    int age= Integer.parseInt(request.getParameter(&quot;age&quot;)s)	;
    String haddrss = 	request.getParameter(&quot;homeaddress&quot;);
    String saddress = 	request.getParameter(&quot;schooladdress&quot;);
    Address address = new Address();
    address.setHomeAddress(haddrss);
    address.setSchoolAddress(saddress);
    Student student = new Student();
    student.setName(name);
     student.setAddress(address);
*/	
    System.out.println(student.getId()+&quot;,&quot;+student.getName()+&quot;,&quot;+student.getAddress().getHomeAddress()+&quot;,&quot;+student.getAddress().getSchoolAddress());
    return &quot;success&quot; ;
}
</code></pre>

<h2 id="initbinder注解">@InitBinder注解</h2>

<p><a href="https://blog.csdn.net/qq_38016931/article/details/82080940">参考博客</a></p>

<p>实现参数绑定</p>

<pre><code class="language-html">&lt;form action=&quot;/testBean&quot; method=&quot;post&quot;&gt;
    name: &lt;input type=&quot;text&quot; name=&quot;u.name&quot;&gt; &lt;br&gt;
    age: &lt;input type=&quot;text&quot; name=&quot;u.age&quot;&gt; &lt;br&gt;
    name: &lt;input type=&quot;text&quot; name=&quot;s.name&quot;&gt; &lt;br&gt;
    age: &lt;input type=&quot;text&quot; name=&quot;s.age&quot;&gt; &lt;br&gt;
    &lt;input type=&quot;submit&quot;&gt;
&lt;/form&gt;
</code></pre>

<pre><code class="language-java">@InitBinder(&quot;user&quot;)
    public void init1(WebDataBinder binder) {
        binder.setFieldDefaultPrefix(&quot;u.&quot;);
    }
    @InitBinder(&quot;stu&quot;)
    public void init2(WebDataBinder binder) {
        binder.setFieldDefaultPrefix(&quot;s.&quot;);
    }
    @RequestMapping(&quot;/testBean&quot;)
    public ModelAndView testBean(User user, @ModelAttribute(&quot;stu&quot;) Student stu) {
        System.out.println(stu);
        System.out.println(user);
        String viewName = &quot;success&quot;;
        ModelAndView modelAndView = new ModelAndView(viewName);
        modelAndView.addObject(&quot;user&quot;, user);
        modelAndView.addObject(&quot;student&quot;, stu);
        return modelAndView;
    }
}
</code></pre>

<p>@InitBinder(&ldquo;user&rdquo;)括号内的参数为类的首字母小写(默认命名规则),也可以用@ModelAttribute(&ldquo;stu&rdquo;)做限定.</p>

<h2 id="在springmvc中使用原生态的servlet-api">在SpringMVC中使用原生态的Servlet API</h2>

<p>HttpServletRequest ,HttpServletResponse</p>

<pre><code class="language-html">&lt;a href=&quot;handler/testServletAPI&quot;&gt;testServletAPI&lt;/a&gt;
</code></pre>

<pre><code class="language-java">@RequestMapping(value=&quot;testServletAPI&quot;)
public String testServletAPI(HttpServletRequest  request,HttpServletResponse response) {
//	request.getParameter(&quot;uname&quot;) ;
    System.out.println(request);
    return &quot;success&quot; ;
}
</code></pre>

<p>直接将 servlet-api中的类、接口等 写在springMVC所映射的方法参数中即可：</p>

<h2 id="处理模型数据">处理模型数据</h2>

<p>如果跳转时需要带数据：V、M,则可以使用以下方式：</p>

<pre><code class="language-java">ModelAndView、ModelMap  、Map、Model   -数据放在了request作用域 
@SessionAttributes、@ModelAttribute
</code></pre>

<h4 id="modelandview">ModelAndView</h4>

<pre><code class="language-html">&lt;a href=&quot;handler/testModelAndView&quot;&gt;testModelAndView&lt;/a&gt;
</code></pre>

<pre><code class="language-java">@RequestMapping(value=&quot;testModelAndView&quot;)
public ModelAndView testModelAndView() {
    //ModelAndView:既有数据，又有视图
    //ModelAndView:Model -M     View-V
    ModelAndView mv = new ModelAndView(&quot;success&quot;);//view:  views/success.jsp,仍然会加前缀和后缀

    Student student = new Student() ;
    student.setId(2);
    student.setName(&quot;zs&quot;);
    mv.addObject(&quot;student&quot;, student);//相当于request.setAttribute(&quot;student&quot;, student);
    return mv;
}
</code></pre>

<p>取值</p>

<pre><code class="language-jsp">${requestScope.student.id } -${requestScope.student.name } &lt;br/&gt;
</code></pre>

<h4 id="modelmap">ModelMap</h4>

<pre><code class="language-html">&lt;a href=&quot;handler/testModelMap&quot;&gt;testModelMap&lt;/a&gt;
</code></pre>

<pre><code class="language-java">@RequestMapping(value=&quot;testModelMap&quot;)
public String testModelMap(ModelMap mm) {
    Student student = new Student() ;
    student.setId(2);
    student.setName(&quot;zs&quot;);
    mm.put(&quot;student2&quot;, student);//request域
    return &quot;success&quot;;  //view
}
</code></pre>

<pre><code>${requestScope.student2.id } -${requestScope.student2.name }  &lt;br/&gt;
</code></pre>

<h4 id="map">Map</h4>

<pre><code class="language-html">&lt;a href=&quot;handler/testMap&quot;&gt;testMap&lt;/a&gt;
</code></pre>

<pre><code class="language-java">@RequestMapping(value=&quot;testMap&quot;)
public String testMap(Map&lt;String,Object&gt; m) {
    Student student = new Student() ;
    student.setId(2);
    student.setName(&quot;zs&quot;);
    m.put(&quot;student3&quot;, student);//request域
    return &quot;success&quot;;
}
</code></pre>

<pre><code>${requestScope.student3.id } -${requestScope.student3.name }
</code></pre>

<h4 id="model">Model</h4>

<pre><code class="language-html">&lt;a href=&quot;handler/testModel&quot;&gt;testModel
</code></pre>

<pre><code class="language-java">@RequestMapping(value=&quot;testModel&quot;)
public String testModel(Model model) {
    Student student = new Student() ;
    student.setId(2);
    student.setName(&quot;zs&quot;);
    model.addAttribute(&quot;student4&quot;,student);//request域
    return &quot;success&quot;;
}
</code></pre>

<pre><code>${requestScope.student4.id } -${requestScope.student4.name }
</code></pre>

<p>会将x对象 放入request域中</p>

<h4 id="如何将上述数据放入session中">如何将上述数据放入session中</h4>

<p>加上注解</p>

<pre><code class="language-java">@SessionAttributes(..)
</code></pre>

<p>在Handlee类前加注解</p>

<pre><code class="language-java">@SessionAttributes(value=&quot;student4&quot;) 
</code></pre>

<p>如果要在request中存放student4对象，则同时将该对象 放入session域中</p>

<pre><code class="language-java">@SessionAttributes(types= {Student.class,Address.class})  
</code></pre>

<p>如果要在request中存放Student类型的对象，则同时将该类型对象放入session域中</p>

<h2 id="modelattribute">@ModelAttribute</h2>

<ol>
<li>经常在 更新时使用</li>

<li><p>在不改变原有代码的基础之上，插入一个新方法。</p>

<pre><code class="language-html">&lt;form action=&quot;handler/testModelAttribute&quot; method=&quot;post&quot;&gt;
编号:&lt;input name=&quot;id&quot; type=&quot;hidden&quot; value=&quot;31&quot; /&gt;
姓名:&lt;input name=&quot;name&quot; type=&quot;text&quot; /&gt;
&lt;input type=&quot;submit&quot; value=&quot;修改&quot;&gt;
&lt;/form&gt;
</code></pre>

<pre><code class="language-java">@ModelAttribute//在任何一次请求前，都会先执行@ModelAttribute修饰的方法
//@ModelAttribute  在请求 该类的各个方法前 均被执行的设计是基于一个思想：一个控制器 只做一个功能
public void queryStudentById(Map&lt;String,Object&gt; map) {
//StuentService stuService = new StudentServiceImpl();
//Student student = stuService.queryStudentById(31);
//模拟调用三层查询数据库的操作
Student student = new Student();
student.setId(31);
student.setName(&quot;zs&quot;);
student.setAge(23);
//map.put(&quot;student&quot;, student) ;//约定：map的key 就是方法参数 类型的首字母小写
map.put(&quot;stu&quot;, student) ;//约定：map的key 就是方法参数 类型的首字母小写
}
</code></pre>

<pre><code class="language-java">//修改:Zs-ls
@RequestMapping(value=&quot;testModelAttribute&quot;)
public String testModelAttribute(@ModelAttribute(&quot;stu&quot;)Student student) {
student.setName(student.getName());//将名字修改为ls
System.out.println(student.getId()+&quot;,&quot;+student.getName()+&quot;,&quot;+student.getAge());
return &quot;success&quot;;
}
</code></pre></li>
</ol>

<p>通过@ModelAttribute修饰的方法 ，会在每次请求前先执行；
并且该方法的参数map.put()可以将 对象 放入 即将查询的参数中；</p>

<p>必须满足的约定：
map.put(k,v) 其中的k 必须是即将查询的方法参数的首字母小写</p>

<pre><code class="language-java"> //map.put(&quot;student&quot;, student) ;

public String testModelAttribute(Student student) 
</code></pre>

<p>如果不一致，需要通过@ModelAttribute声明。</p>

<pre><code class="language-java">map.put(&quot;stu&quot;, student);
public String testModelAttribute(@ModelAttribute(&quot;stu&quot;)Student student) {
</code></pre>

<p>一个Servlet 对应一个功能：</p>

<p>增删改查  对应于 4个Servlet</p>

<p>@ModelAttribute会在 该类的每个方法执行前 均被执行一次，因为使用时需要注意。</p>

<h2 id="视图-视图解析器">视图、视图解析器</h2>

<p>流程</p>

<p>Controller返回值&ndash;&gt;ModeAndView&ndash;&gt;ViewResolver(视图解析器)&ndash;&gt;视图view（渲染）（Jsp/PDF/Excel）</p>

<p>视图的顶级接口:</p>

<pre><code>View
</code></pre>

<p>视图解析器顶级接口：</p>

<pre><code>ViewResolver
</code></pre>

<p>常见的视图和解析器：</p>

<pre><code>InternalResourceView、InternalResourceViewResolver
</code></pre>

<p><img src="/resources/技术框架/Spring家族/View实现类简介.png" alt="View实现类简介" title="View实现类简介" /></p>

<p><code>public class JstlView extends InternalResourceView：</code></p>

<p>springMVC解析jsp时 会默认使用InternalResourceView，如果发现Jsp中包含了jstl语言相关的内容，则自动转为JstlView。</p>

<p>JstlView： 可以解析jstl\实现国际化操作</p>

<p>国际化： 针对不同地区、不同国家 ，进行不同的显示</p>

<pre><code>中国:           欢迎
美国：          welcome  
</code></pre>

<p><img src="/resources/技术框架/Spring家族/常见的资源文件命名.png" alt="常见的资源文件命名" title="常见的资源文件命名.png" /></p>

<h4 id="具体实现国际化步骤">具体实现国际化步骤：</h4>

<ol>
<li><p>创建资源文件</p>

<pre><code>基名_语言_地区.properties
基名_语言.properties
</code></pre>

<p>中国</p>

<p>i18n_zh_CH.properties</p>

<pre><code>resource.welcome=你好
resource.exist=退出
</code></pre>

<p>i18n_en_US.properties</p>

<pre><code>resource.welcome=WELCOME
resource.exist=EXIST
</code></pre>

<p>i18n.properties</p>

<pre><code>xxx
</code></pre>

<p>系统会先查询i18n_zh_CH.properties文件中的内容，如果其他文件中没有设置一些属性的值，则在i18n.properties中寻找</p>

<p>文件中存放的是ASCLL值，如果输入时，没有进行转化，可以使用jdk中的工具：</p>

<pre><code>cd到jdk安装位置/bin
native2ascii.exe回车
输入要转化的值  回车
</code></pre>

<p>然后将转换后的值放入文件中</p>

<p>i18n:internationalization的首末字符i和n，18为中间的字符数</p></li>

<li><p>配置springmvc.xml，加载资源文件</p>

<pre><code class="language-xml">&lt;!-- 加载国际化资源文件 --&gt;
&lt;bean id=&quot;messageSource&quot; class=&quot;org.springframework.context.support.ResourceBundleMessageSource&quot;&gt;
&lt;property name=&quot;basename&quot; value=&quot;i18n&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre>

<p>ResourceBundleMessageSource会在springmvc响应程序时 介入（解析国际化资源文件）</p>

<p>springmvc在启动时，会自动查找一个id=&ldquo;messageSource&rdquo;的bean，如果有  则自动加载</p></li>

<li><p>通过jstl使用国际化</p>

<p>jar</p>

<pre><code>jstl.jar  standar.jar
</code></pre>

<p>导入命名空间success.jsp</p>

<pre><code class="language-xml">&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;fmt&quot; %&gt;  
</code></pre>

<p>使用</p>

<pre><code class="language-xml">&lt;fmt:message key=&quot;resources.welcome&quot;&gt;&lt;/fmt:message&gt;
&lt;fmt:message key=&quot;resources.exit&quot;&gt;&lt;/fmt:message&gt;
</code></pre>

<p>ResourceBundleMessageSource:在MVC响应时介入，因此不能直接访问success.jsp，需要响应请求后访问</p>

<pre><code class="language-html">&lt;a href=&quot;handler/testI18n&quot;&gt;testI18n&lt;/a&gt;
</code></pre>

<pre><code class="language-java">@RequestMapping(value=&quot;testI18n&quot;)
public String testI18n() {
    return &quot;success&quot;;
}
</code></pre></li>
</ol>

<h3 id="internalresourceviewresolver其他功能">InternalResourceViewResolver其他功能：</h3>

<h4 id="mvc-view-controller"><code>&lt;mvc:view-controller ...&gt;</code></h4>

<pre><code>index.jsp -&gt; Controller(@RequsetMapping(&quot;a&quot;)) -&gt;succes.jsp
</code></pre>

<p>要用SpringMVC实现：index.jsp -&gt; succes.jsp  ：</p>

<pre><code class="language-html">&lt;a href=&quot;handler/testMvcViewController&quot;&gt;testMvcViewController&lt;/a&gt;
</code></pre>

<p>配置，springMVC.xml</p>

<pre><code class="language-xml">&lt;!--view-name会被视图解析器 加上前缀、后缀  --&gt;
&lt;mvc:view-controller path=&quot;handler/testMvcViewController&quot; view-name=&quot;success&quot;/&gt;
</code></pre>

<p>以上注解 ，会让所有的请求 转入<code>&lt;mvc:..&gt;</code>标签中匹配映射地址，而会忽略调@RequsetMapping()；(controller)</p>

<p>如果想让 @RequsetMapping(&ldquo;a&rdquo;)  和<code>&lt;mvc:..&gt;</code>共存，则需要加入一个注解：</p>

<pre><code class="language-xml">&lt;!--此配置是SpringMVC的基础配置，很功能都需要通过该注解来协调  --&gt;
&lt;mvc:annotation-driven&gt;&lt;/mvc:annotation-driven&gt;
</code></pre>

<p>​	</p>

<h2 id="指定请求方式">指定请求方式</h2>

<p>指定跳转方式：
请求转发：地址栏不改变</p>

<pre><code>return &quot;forward:/views/success.jsp&quot;;    
</code></pre>

<p>重定向：地址栏改变
    return &ldquo;redirect:/views/success.jsp&rdquo;;</p>

<p>forward:   redirect: ，需要注意 此种方式，不会被视图解析器加上前缀(/views)、后缀(.jsp)</p>

<h2 id="处理静态资源">处理静态资源：</h2>

<pre><code>html css js  图片 视频
</code></pre>

<p>动态（百度：天气  ）：可以与用户交互、因为时间/地点的不同 而结果不同的内容</p>

<p>在SpringMVC中，如果直接访问静态资源：404 。</p>

<p>原因：之前将所有的请求 通过通配符<code>/</code>拦截，进而交给 SPringMVC的入口DispatcherServlet去处理：找该请求映射对应的 @requestMapping</p>

<p><a href="http://localhost:8888/SpringMVCProject/img.png">http://localhost:8888/SpringMVCProject/img.png</a></p>

<pre><code>@RequsetMapping(&quot;img.png&quot;)
return sucess
</code></pre>

<p>解决：如果是 需要mvc处理的，则交给@RequsetMapping(&ldquo;img.png&rdquo;)处理；如果不需要springmvc处理，则使用 tomcat默认的Servlet去处理。</p>

<p>tomcat默认的Servlet去处理：如果有 对应的请求拦截,则交给相应的Servlet去处理；如果没有对应的servlet，则直接访问。</p>

<p>tomcat默认的Servlet在哪里？</p>

<p>在tomcat配置文件\conf\web.xml中</p>

<p>解决静态资源方案：如果有springmvc对应的@requestMapping则交给spring处理；如果没有对应@requestMapping,则交给服务器tomcat默认的servlet去处理  ：</p>

<p>实现方法，只需要增加2个注解即可 springmvc.xml：</p>

<pre><code class="language-xml">&lt;!-- 该注解 会让 springmvc： 接收一个请求，并且该请求 没有对应的@requestmapping时，将该请求 交给服务器默认的servlet去处理（直接访问）  --&gt;
&lt;mvc:default-servlet-handler&gt;&lt;/mvc:default-servlet-handler&gt;

&lt;mvc:annotation-driven&gt;&lt;/mvc:annotation-driven&gt;
</code></pre>

<p>总结：要让springmvc访问静态资源，只需要加入以下2个注解：</p>

<pre><code class="language-xml">&lt;mvc:default-servlet-handler&gt;&lt;/mvc:default-servlet-handler&gt;
&lt;mvc:annotation-driven&gt;&lt;/mvc:annotation-driven&gt;
</code></pre>

<h2 id="类型转换">类型转换</h2>

<h4 id="spring自带一些-常见的类型转换器">Spring自带一些 常见的类型转换器</h4>

<pre><code>public String  testDelete(@PathVariable(&quot;id&quot;) String id) 
</code></pre>

<p>既可以接受int类型数据id  也可以接受String类型的id</p>

<h4 id="可以自定义类型转换器">可以自定义类型转换器</h4>

<ol>
<li><p>编写 自定义类型转器的类 （实现Converter接口）</p>

<pre><code class="language-java">//将字符串变成Student
public class MyConverter  implements Converter&lt;String,Student&gt;{
    @Override
    public Student convert(String source) {//source:2-zs-23
        //source接受前端传来的String:2-zs-23
        String[] studentStrArr = source.split(&quot;-&quot;) ;
        Student student = new Student();
        student.setId(  Integer.parseInt(  studentStrArr[0]) );
        student.setName(studentStrArr[1]);
        student.setAge(Integer.parseInt(studentStrArr[2] ));
        return student;
    }
}
</code></pre></li>

<li><p>配置：将MyConverter加入到springmvc中</p>

<ol>
<li><p>将 自定义转换器 纳入SpringIOC容器</p>

<pre><code class="language-xml">&lt;!-- 1将 自定义转换器 纳入SpringIOC容器 --&gt;
&lt;bean  id=&quot;myConverter&quot; class=&quot;org.lanqiao.converter.MyConverter&quot;&gt;&lt;/bean&gt;
</code></pre></li>

<li><p>将myConverter再纳入 SpringMVC提供的转换器Bean</p>

<pre><code class="language-xml">&lt;!-- 2将myConverter再纳入 SpringMVC提供的转换器Bean --&gt;
&lt;bean id=&quot;conversionService&quot;  class=&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;&gt;
    &lt;property name=&quot;converters&quot;&gt;
        &lt;set&gt;
            &lt;ref bean=&quot;myConverter&quot;/&gt;
        &lt;/set&gt;
    &lt;/property&gt;
&lt;/bean&gt;
</code></pre></li>

<li><p>将conversionService注册到annotation-driven中</p>

<pre><code class="language-xml">&lt;!-- 3将conversionService注册到annotation-driven中 --&gt;
&lt;!--此配置是SpringMVC的基础配置，很功能都需要通过该注解来协调  --&gt;
&lt;mvc:annotation-driven conversion-service=&quot;conversionService&quot;&gt;&lt;/mvc:annotation-driven&gt;
</code></pre></li>
</ol></li>
</ol>

<p>测试转换器：</p>

<pre><code class="language-html">&lt;form action=&quot;handler/testConverter&quot; method=&quot;post&quot;&gt;
    学生信息:&lt;input name=&quot;studentInfo&quot; type=&quot;text&quot;  /&gt;&lt;!-- 2-zs-23  --&gt;
    &lt;input type=&quot;submit&quot; value=&quot;转换&quot;&gt;
&lt;/form&gt;
</code></pre>

<pre><code class="language-java">@RequestMapping(value=&quot;testConverter&quot;)
public String testConverter(@RequestParam(&quot;studentInfo&quot;)  Student student) {// 前端：2-zs-23 
    System.out.println(student.getId()+&quot;,&quot;+student.getName()+&quot;,&quot;+student.getAge());
    return &quot;success&quot;;
}
</code></pre>

<p>其中<code>@RequestParam(&quot;studentInfo&quot;)</code>是触发转换器的桥梁：
<code>@RequestParam(&quot;studentInfo&quot;)</code>接收的数据 是前端传递过来的：<code>2-zs-23</code> ，但是需要将该数据赋值给修饰的目的对象<code>Student</code>；因此SPringMVC可以发现 接收的数据 和目标数据不一致，并且 这两种数据分别是 <code>String</code>、<code>Student</code>,正好符合<code>public Student convert(String source)</code>转换器。因此将类型进行转换</p>

<h2 id="数据格式化">数据格式化</h2>

<p>主要用于对数字和日期的转换</p>

<pre><code class="language-java">SimpleDateForamt sdf = new SimpleDateFormat(&quot;yyyy-MM-dd  hh:mm:ss&quot;);
</code></pre>

<p>SPringMVC提供了很多注解，方便我们数据格式化</p>

<pre><code class="language-java">    @DateTimeFormat(pattern=&quot;yyyy-MM-dd&quot;)
    @NumberFormat(parttern=&quot;###,#&quot;)  
</code></pre>

<p>实现步骤：
1. 配置,springMVC.xml
    <code>xml
        &lt;!-- 配置 数据格式化 注解 所依赖的bean --&gt;
        &lt;bean id=&quot;conversionService&quot; class=&quot;org.springframework.format.support.FormattingConversionServiceFactoryBean&quot;&gt;
        &lt;/bean&gt;
</code>
2. 通过注解使用</p>

<pre><code>Student.java
```java
@DateTimeFormat(pattern=&quot;yyyy-MM-dd&quot;)
private Date birthday ;//  2018-12-13
@NumberFormat(pattern=&quot;###,#&quot;) 
</code></pre>

<p>	private int id;
    ```
    格式化：前台传递来的数据，将前台传递来到数据 固定为yyyy-MM-dd</p>

<pre><code>当输入格式不正确时会报错
</code></pre>

<p>测试</p>

<pre><code class="language-html">&lt;form action=&quot;handler/testDateTimeFormat&quot; method=&quot;post&quot;&gt;
    编号:&lt;input name=&quot;id&quot; type=&quot;text&quot; value=&quot;31&quot; /&gt;
    姓名:&lt;input name=&quot;name&quot; type=&quot;text&quot; /&gt;
    出生日期:&lt;input name=&quot;birthday&quot; type=&quot;text&quot; /&gt;
    &lt;input type=&quot;submit&quot; value=&quot;修改&quot;&gt;
&lt;/form&gt;
</code></pre>

<pre><code class="language-java">@RequestMapping(value=&quot;testDateTimeFormat&quot;)
//如果Student格式化出错，会将错误信息 传入result中，这样控制台会显示错误信息，但是前端不显示了，类似异常处理，将异常进行了处理
public String testDateTimeFormat(Student student , BindingResult result) {
    System.out.println(student.getId()+&quot;,&quot;+student.getName()+&quot;,&quot;+student.getBirthday());
    if(result.getErrorCount() &gt;0) {
        for(FieldError error:  result.getFieldErrors() ) {
            System.out.println(error.getDefaultMessage());
        }
    }
    return &quot;success&quot;;
}
</code></pre>

<p>在配置时发现格式化和类型转换所用到的类为</p>

<pre><code>FormattingConversionServiceFactoryBean
ConversionServiceFactoryBean
</code></pre>

<p>因此可以将类型转化在格式化中配置，即<code>FormattingConversionServiceFactoryBean</code>:既可以实现格式化、又可以实现类型转换</p>

<p>由</p>

<pre><code class="language-xml">&lt;!--
    &lt;bean id=&quot;conversionService&quot;  class=&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;&gt;
        &lt;property name=&quot;converters&quot;&gt;
            &lt;set&gt;
                &lt;ref bean=&quot;myConverter&quot;/&gt;
            &lt;/set&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
--&gt;
</code></pre>

<p>整合到</p>

<pre><code class="language-xml">&lt;bean id=&quot;conversionService&quot; class=&quot;org.springframework.format.support.FormattingConversionServiceFactoryBean&quot;&gt;
    &lt;property name=&quot;converters&quot;&gt;
        &lt;set&gt;
            &lt;ref bean=&quot;myConverter&quot;/&gt;
        &lt;/set&gt;
    &lt;/property&gt;
&lt;/bean&gt; 
</code></pre>

<h3 id="错误消息">错误消息：</h3>

<p>上面我们可知，发生异常时在控制台打印后就不在页面打印了，此时想要两处都提示：</p>

<p>思路：将异常信息传到前端页面中即可</p>

<pre><code class="language-java">@RequestMapping(value=&quot;testDateTimeFormat&quot;)//如果Student格式化出错，会将错误信息 传入result中
public String testDateTimeFormat(@Valid Student student, BindingResult result ,Map&lt;String,Object&gt; map) {
    
//System.out.println(student.getId()+&quot;,&quot;+student.getName()+&quot;,&quot;+student.getBirthday());
    if(result.getErrorCount() &gt;0) {
        for(FieldError error:  result.getFieldErrors() ) {
            System.out.println(error.getDefaultMessage());
            map.put(&quot;errors&quot;, result.getFieldErrors()  ) ;//将错误信息传入requset域中的errors中
//                  result.getFieldErrors().get(0).getDefaultMessage()
        }
    }
    return &quot;success&quot;;
}
</code></pre>

<pre><code class="language-jsp">&lt;c:forEach  items=&quot;${requestScope.errors}&quot; var=&quot;error&quot;&gt;
        ${error.getDefaultMessage()}&lt;br/&gt;
&lt;/c:forEach&gt;
</code></pre>

<p>取值时使用了jstl表达式，因此需要配置</p>

<p>jar包</p>

<pre><code>jstl.jar    standaed.jar
</code></pre>

<p>引入jstl标签库xx.jsp</p>

<pre><code class="language-jsp"> &lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;  
</code></pre>

<pre><code class="language-java">public String testDateTimeFormat(Student student, BindingResult result ,Map&lt;String,Object&gt; map) {}
</code></pre>

<p>需要验证的数据是 Student中的birthday, SPringMVC要求 如果校验失败  则将错误信息 自动放入 该对象之后紧挨着的	<code>BindingResult</code>中。即<code>Student student</code>, <code>BindingResult result之</code>间 不能有其他参数。</p>

<p>如果要将控制台的错误消息 传到jsp中显示，则可以将 错误消息对象放入request域中，然后 在jsp中 从request中获取。</p>

<h2 id="数据校验">数据校验</h2>

<p>	JSR303<br />
	Hibernate Validator
<img src="/resources/技术框架/Spring家族/JSR303注解.png" alt="JSR303注解" title="JSR303注解" /></p>

<p>Hibernate Validator 是JSR 303的扩展。Hibernate Validator 提供了 JSR 303中所有内置的注解，以及自身扩展的4个注解</p>

<p><img src="/resources/技术框架/Spring家族/Hibernate-Validator扩展注解.png" alt="Hibernate-Validator扩展注解" title="Hibernate-Validator扩展注解" /></p>

<p>使用Hibernate Validator步骤：</p>

<h4 id="jar-1">jar</h4>

<p>（注意各个jar之间可能存在版本不兼容）</p>

<pre><code>hibernate-validator-5.0.0.CR2.jar 	classmate-0.8.0.jar 	jboss-logging-3.1.1.GA.jar
validation-api-1.1.0.CR1.jar 	hibernate-validator-annotation-processor-5.0.0.CR2.jar
</code></pre>

<h4 id="配置springmvc-xml">配置springMVC.xml</h4>

<pre><code class="language-xml">&lt;mvc:annotation-driven &gt;&lt;/mvc:annotation-driven&gt;
</code></pre>

<p>此时<code>mvc:annotation-driven</code>的作用：要实现Hibernate Validator/JSR303 校验（或者其他各种校验），必须实现SpringMVC提供的一个接口：<code>ValidatorFactory</code></p>

<p>springMVC已经帮我们写了一个<code>ValidatorFactory</code>的实现类<code>LocalValidatorFactoryBean</code></p>

<p><code>&lt;mvc:annotation-driven &gt;&lt;/mvc:annotation-driven&gt;</code>会在springmvc容器中 自动加载一个LocalValidatorFactoryBean类，因此可以直接实现数据校验。</p>

<h4 id="直接使用注解">直接使用注解</h4>

<ol>
<li><p>在属性前加注解</p>

<pre><code class="language-java">public class Student {
    @Past//当前时间以前
    private Date birthday ;
	}
	```
	
2. 在校验的Controller中 ，给校验的对象前增加 @Valid

</code></pre>

<p>java
public String testDateTimeFormat(@Valid Student student, BindingResult result ,Map<String,Object> map) {}</p>

<pre><code>


## Ajax请求SpringMVC，并且返回JSON格式的数据
jar

jackson-annotations-2.8.9.jar
jackson-core-2.8.9.jar
jackson-databind-2.8.9.jar

ajax请求

</code></pre>

<p>html</p></li>
</ol>

<p><script type="text/javascript" src="js/jquery-1.8.3.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $(&ldquo;#testJson&rdquo;).click(function(){
            //通过ajax请求springmvc
            $.post(
                &ldquo;handler/testJson&rdquo;,//服务器地址
                //{&ldquo;name&rdquo;:&ldquo;zs&rdquo;,&ldquo;age&rdquo;:23}
                function(result){//服务端处理完毕后的回调函数 List<Student> students， 加上@ResponseBody后， students实质是一个json数组的格式
                    for(var i=0;i&lt;result.length ;i++){
                        alert(result[i].id +&ldquo;-&rdquo;+result[i].name +&ldquo;-&rdquo;+result[i].age);
                    }
                }
            );
        });
    });</p>

<pre><code></code></pre>

<p>java
@ResponseBody//告诉SpringMVC，此时的返回 不是一个 View页面，而是一个 ajax调用的返回值（Json数组）
@RequestMapping(value=&ldquo;testJson&rdquo;)
public List<Student> testJson() {
    //Controller-Service-dao
    //StudentService studentService = new StudentServiceImp();
//List<Student> students =  studentService.qeuryAllStudent();
    //模拟调用service的查询操作
    Student stu1 = new Student(1,&ldquo;zs&rdquo;,23);
    Student stu2 = new Student(2,&ldquo;ls&rdquo;,24);
    Student stu3 = new Student(3,&ldquo;ww&rdquo;,25);
    List<Student> students = new ArrayList&lt;&gt;();
    students.add(stu1) ;
    students.add(stu2) ;
    students.add(stu3) ;
    return students;
}</p>

<pre><code>

## SpringMVC实现文件上传

和Servlet方式的本质一样，都是通过

    commons-fileupload.jar和commons-io.jar

SpringMVC可以简化文件上传的代码，但是必须满足条件：实现`MultipartResolver`接口 ；而该接口的实现类SpringMVC也已经提供了`CommonsMultipartResolver`

具体步骤：（直接使用`CommonsMultipartResolver`实现上传）
1. jar包

        commons-fileupload.jar、commons-io.jar

2. 配置`CommonsMultipartResolver`

    将其加入SpringIOC容器

    ```xml
    &lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt;
            &lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;&gt;&lt;/property&gt;
            &lt;!-- 上传单个文件的最大值，单位Byte;如果-1，表示无限制 --&gt;
            &lt;property name=&quot;maxUploadSize&quot;  value=&quot;104857600&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    ```
    配置`CommonsMultipartResolver`，用于实现文件上传
    将其加入SpringIOC容器.

    springIoc容器在初始化时，会自动寻找一个`Id=&quot;multipartResolver&quot;`的bean，并将其加入Ioc容器

1. 处理方法
    ```html
    &lt;form action=&quot;handler/testUpload&quot; method=&quot;post&quot;  enctype=&quot;multipart/form-data&quot;&gt;
        &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;
        描述:&lt;input name=&quot;desc&quot; type=&quot;text&quot; /&gt;
        &lt;input type=&quot;submit&quot; value=&quot;上传&quot;&gt;
    &lt;/form&gt;
    ```
    ```java
    //文件上传处理方法
    @RequestMapping(value=&quot;testUpload&quot;) //abc.png
    public String testUpload(@RequestParam(&quot;desc&quot;) String desc  , @RequestParam(&quot;file&quot;) MultipartFile file  ) throws IOException {
        System.out.println(&quot;文件描述信息：&quot;+desc);
        //jsp中上传的文件：file
        InputStream input = file.getInputStream() ;//IO
        String fileName = file.getOriginalFilename() ;
        OutputStream out = new FileOutputStream(&quot;d:\\&quot;+fileName) ;
        byte[] bs = new byte[1024];
        int len = -1;
        while(( len = input.read(bs)) !=-1 ) {
            out.write(bs, 0, len);
        }
        out.close();
        input.close();
        //将file上传到服务器中的 某一个硬盘文件中
        System.out.println(&quot;上传成功！&quot;);
        return &quot;success&quot;;
    }
    ```
框架：  将原来自己写的1000行代码，变成：框架帮你写900行，剩下100行自己写

控制器：handler  servlet   controller   action  

## 拦截器

![拦截器](/resources/技术框架/Spring家族/拦截器.png &quot;拦截器&quot;)

拦截器的原理和过滤器相同。

SpringMVC：要想实现拦截器，必须实现一个接口

    HandlerInterceptor

1. 编写拦截器

    implements HandlerInterceptor

    拦截器一
    ```java
    public class MyInterceptor  implements HandlerInterceptor{
        @Override
        public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)
                throws Exception {
            System.out.println(&quot;拦截请求&quot;);  //
            return true;//true:拦截操作之后，放行 ；false:拦截之后不放行，请求终止；
        }
        @Override
        public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler,
                ModelAndView modelAndView) throws Exception {
            System.out.println(&quot;拦截响应&quot;);
        }
        @Override
        public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)
                throws Exception {
            System.out.println(&quot;视图(jsp)被渲染完毕&quot;);
        }
    }
    ```
    拦截器二
    ```java
    public class MySecondInterceptor implements HandlerInterceptor {
        @Override
        public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)
                throws Exception {
            System.out.println(&quot;第二个拦截器，拦截请求...22222&quot;);
            return true;
        }
        @Override
        public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler,
                ModelAndView modelAndView) throws Exception {
            System.out.println(&quot;第二个拦截器，拦截响应...22222&quot;);
        }
        @Override
        public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)
                throws Exception {
            System.out.println(&quot;第二个拦截器，afterCompletion&quot;);
        }
    }
    ```
1. 配置

    将自己写的拦截器 配置到springmvc中（spring）
    ```xml
    &lt;!-- 将自己写的拦截器 配置到springmvc中（spring）；默认拦截全部请求 --&gt;
	&lt;mvc:interceptors&gt;
        &lt;!--拦截一切请求时放在这
            &lt;bean  class=&quot;org.lanqiao.interceptor.MySecondInterceptor&quot;&gt;&lt;/bean&gt;
        --&gt;
    &lt;!-- 配置具体的拦截路径,二者取交集 --&gt;
        &lt;mvc:interceptor&gt;
            &lt;!-- 指定拦截的路径,基于ant风格 --&gt;
            &lt;mvc:mapping path=&quot;/**&quot;/&gt;  
            &lt;!-- 指定拦不截的路径 --&gt;
            &lt;mvc:exclude-mapping path=&quot;/handler/testUpload&quot;/&gt; 
            &lt;bean  class=&quot;org.lanqiao.interceptor.MyInterceptor&quot;&gt;&lt;/bean&gt;
        &lt;/mvc:interceptor&gt;
            &lt;!-- 配置具体的拦截路径 --&gt;
        &lt;mvc:interceptor&gt;
            &lt;!-- 指定拦截的路径,基于ant风格 --&gt;
            &lt;mvc:mapping path=&quot;/**&quot;/&gt;  
            &lt;!-- 指定拦不截的路径 --&gt;
            &lt;mvc:exclude-mapping path=&quot;/handler/testUpload&quot;/&gt; 
            &lt;bean  class=&quot;org.lanqiao.interceptor.MySecondInterceptor&quot;&gt;&lt;/bean&gt;
        &lt;/mvc:interceptor&gt;
    &lt;/mvc:interceptors&gt;
	```

拦截器1拦截请求- 拦截器2拦截请求 - 请求方法 - 拦截器2处理相应-拦截器1处理相应-    只会被 最后一个拦截器的afterCompletion()拦截

如果有多个拦截器，则每个拦截器的`preHandle` `postHandle` 都会在相应时机各被触发一次；但是`afterCompletion`， 只会执行最后一个拦截器的该方法。

## 异常处理

SpringMVC实现异常处理的顶级接口

    HandlerExceptionResolver

该接口的每个实现类 都是异常的一种处理方式：

#### ExceptionHandlerExceptionResolver

主要提供了`@ExceptionHandler`注解，并通过该注解处理异常

controller中出现异常

</code></pre>

<p>java
@RequestMapping(&ldquo;testExceptionHandler&rdquo;)
public String testExceptionHandler() {
    //try {
        System.out.println( <sup>1</sup>&frasl;<sub>0</sub> );//
    //}catch(ArithmeticException e) e
    //}catch(Exception e) e
return &ldquo;success&rdquo; ;
}</p>

<pre><code>controller中定义捕获异常的方法
</code></pre>

<p>java
//该方法 可以捕获本类中  抛出的ArithmeticException异常,并返回error页面，将错误信息传递给error页面
@ExceptionHandler({ArithmeticException.class})
public ModelAndView handlerArithmeticException(ArithmeticException e) {
    ModelAndView mv = new ModelAndView(&ldquo;error&rdquo;);
    System.out.println(e +&ldquo;============&rdquo;);
    mv.addObject(&ldquo;er&rdquo;, e) ;
    return  mv;
}</p>

<pre><code>error获取异常信息

</code></pre>

<p>${requesrScope.e}</p>

<pre><code>数组越界异常
</code></pre>

<p>java
@RequestMapping(&ldquo;testExceptionHandler2&rdquo;)
public String testExceptionHandler2() {
    int[] nums = new int[2];
    System.out.println(nums[2]);//ArrayIndexOutOfBoundsException
    return &ldquo;success&rdquo; ;
}</p>

<pre><code></code></pre>

<p>java
//该方法 可以捕获本类中  抛出的ArithmeticException异常
@ExceptionHandler({ArithmeticException.class,ArrayIndexOutOfBoundsException.class})
public ModelAndView handlerArithmeticException(Exception e) {
    ModelAndView mv = new ModelAndView(&ldquo;error&rdquo;);
    System.out.println(e +&ldquo;============&rdquo;);
    mv.addObject(&ldquo;er&rdquo;, e) ;
    return  mv;
}</p>

<pre><code>`@ExceptionHandler`标识的方法的参数 必须在异常类型(Throwable或其子类) ，不能包含其他类型的参数

异常处理路径：最短优先  

如果有方法抛出一个ArithmeticException异常，而该类中 有2个对应的异常处理方法：

</code></pre>

<p>java
@ExceptionHandler({Exception.class  })
public ModelAndView handlerArithmeticException2(Exception e) {}</p>

<p>@ExceptionHandler({ArithmeticException.class  })
public ModelAndView handlerArithmeticException1(Exception e) {}</p>

<pre><code>
则优先级：  最短优先。

@ExceptionHandler默认只能捕获 当前类中的异常方法。

如果发生异常的方法  和处理异常的方法 不在同一个类中：@ControllerAdvice

</code></pre>

<p>java
//@ControllerAdvice
public class MyExceptionHandler {//不是控制器，仅仅是 用于处理异常的类</p>

<pre><code>将处理异常的方法放到该类中


</code></pre>

<p>java
@ExceptionHandler({Exception.class  })
public ModelAndView handlerArithmeticException2(Exception e) {
    ModelAndView mv = new ModelAndView(&ldquo;error&rdquo;);
    System.out.println(e +&ldquo;============&rdquo;+&ldquo;该@ControllerAdvice中的异常处理方法，可以处理任何类中的异常&rdquo;);
    mv.addObject(&ldquo;er&rdquo;, e) ;
    return  mv;
    }
}</p>

<pre><code>总结：如果一个方法用于处理异常，并且只处理当前类中的异常：`@ExceptionHandler`

如果一个方法用于处理异常，并且处理所有类中的异常： 类前加`@ControllerAdvice`、 处理异常的方法前加`@ExceptionHandler`

#### ResponseStatusExceptionResolver

自定义异常显示页面` @ResponseStatus`

</code></pre>

<p>java
@ResponseStatus(value=HttpStatus.FORBIDDEN,reason=&ldquo;数组越界222!!!&rdquo;)
public class MyArrayIndexOutofBoundsException extends Exception {//自定义异常
}</p>

<pre><code></code></pre>

<p>java
@RequestMapping(&ldquo;testMyException&rdquo;)
public String testMyException(@RequestParam(&ldquo;i&rdquo;) Integer i) throws MyArrayIndexOutofBoundsException {
    if(i == 3) {
        throw new MyArrayIndexOutofBoundsException();//抛出异常
    }
    return &ldquo;success&rdquo; ;
}</p>

<pre><code>@ResponseStatus也可以标志在方法前：
</code></pre>

<p>java
@RequestMapping(&ldquo;testMyException2&rdquo;)
public String testMyException2(@RequestParam(&ldquo;i&rdquo;) Integer i) {
    if(i == 3) {
        return &ldquo;redirect:testResponseStatus&rdquo; ;//跳转到某一个 异常处理方法里
    }
    return &ldquo;success&rdquo; ;
}
@ResponseStatus(value=HttpStatus.CONFLICT  ,reason=&ldquo;测试。。。&rdquo;)
@RequestMapping(&ldquo;testResponseStatus&rdquo;)
public String testResponseStatus() {
    return &ldquo;success&rdquo; ;
}</p>

<pre><code>
#### DefaultHandlerExceptionResolver

SPringMVC在一些常见异常的基础上（300 500  405），新增了一些异常，例如：

    * @see org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler
    * @see #handleNoSuchRequestHandlingMethod
    * @see #handleHttpRequestMethodNotSupported  ：如果springmvc的处理方法限制为post方式，如果实际请求为get,则会触发此异常显示的页面
    * @see #handleHttpMediaTypeNotSupported
    * @see #handleMissingServletRequestParameter
    * @see #handleServletRequestBindingException
    * @see #handleTypeMismatch
    * @see #handleHttpMessageNotReadable
    * @see #handleHttpMessageNotWritable
    * @see #handleMethodArgumentNotValidException
    * @see #handleMissingServletRequestParameter
    * @see #handleMissingServletRequestPartException
    * @see #handleBindException

#### SimpleMappingExceptionResolver

通过配置来实现异常的处理

</code></pre>

<p>java
@RequestMapping(value=&ldquo;testSimpleMappingExceptionResolver&rdquo;)
public String  testSimpleMappingExceptionResolver() {
    System.out.println(<sup>1</sup>&frasl;<sub>0</sub>);
    return &ldquo;success&rdquo; ;
}</p>

<pre><code></code></pre>

<p>xml
<!-- SimpleMappingExceptionResolver:以配置的方式 处理异常 -->
<bean  class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
    <!-- 如果发生异常，异常对象会被保存在  exceptionAttribute的value值中；并且会放入request域中 ；异常变量的默认值是 exception-->
    <!--<property name="exceptionAttribute" value="exception"></property>-->
    <property name="exceptionMappings">
        <props>
            <!-- 相当于catch(ArithmeticException ex){ 跳转：error } -->
            <prop key="java.lang.ArithmeticException">
                error
            </prop>
            <prop key="java.lang.NullPointerException">
                error
            </prop>
        </props>
    </property>
</bean></p>

<pre><code></code></pre>

<p>${requestScope.exception}</p>

<pre><code>

## 表单标签:

启动tomcat报错：
</code></pre>

<p>Caused by: java.lang.IllegalArgumentException: More than one fragment with the name [spring_web] was found. This is not legal with relative ordering. See section 8.2.2 2c of the Servlet specification for details.</p>

<pre><code>需要在web.xml添加标签

    &lt;absolute-ordering/&gt;


自定义标签el/ jstl

Spring EL : 
1. 支持各种类型的请求方式(查询doGet增 加doPost、删除doDelete 、修改doPut)
2. 可以将对象和表单绑定起来；对象的属性--表单path值 一一对应

#### IDEA开发springmvc

SpringMVC项目:

选择Springmvc:自动下载springmvc相关的jar

处理Jar :artifacts - fix : miss all...

开发代码:


#### 引入标签库

</code></pre>

<p>jsp
&lt;%@ taglib prefix=&ldquo;form&rdquo; uri=&ldquo;<a href="http://www.springframework.org/tags/form&quot;">http://www.springframework.org/tags/form&quot;</a> %&gt;</p>

<pre><code>
#### 使用：

类
</code></pre>

<p>java</p>

<p>public class Persion {
    private String name;
    private int age;
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public int getAge() {
        return age;
    }
    public void setAge(int age) {
        this.age = age;
    }
}</p>

<pre><code>表单
</code></pre>

<p>html
<a href="form:form">form:form</a>
    姓名：<form:input path="name"/><br>
    年龄：<form:input path="age"/>
    <input type="submit" value="提交">
<a href="/form:form">/form:form</a></p>

<pre><code>控制器
</code></pre>

<p>java
@Controller
@RequestMapping(&ldquo;/FormDemo&rdquo;)
public class FormDemo {
    public String testForm(Map<String,Object> map){
        Persion per = new Persion();
        per.setAge(23);
        per.setName(&ldquo;zs&rdquo;);
        map.put(&ldquo;command&rdquo;, per);//将per放入了request域中的command中
        return &ldquo;forward:/views/springForm.jsp&rdquo;;
    }
}</p>

<pre><code>`&lt;form id=&quot;command&quot;&gt;`:SpringMVC标签会默认自动从名为&quot;command&quot;的对象中获取值，因此传值时将值放入command中

如果在map.put()时，名字不是command，则需要手工指定


</code></pre>

<p>html
<form:form commandName="person">
或
<form:form modelAttribute="person"></p>

<pre><code>
则传值时

     map.put(&quot;person&quot;, per);//将per放入了request

#### 各种表单的提交方式

1. 编写method属性

    ```html
    &lt;form:form action=&quot;FormDemo/testMethod&quot; method=&quot;post&quot;&gt;

    &lt;input type=&quot;submit&quot; value=&quot;增加&quot;&gt;
    &lt;/form:form&gt;
    &lt;form:form action=&quot;FormDemo/testMethod&quot; method=&quot;delete&quot;&gt;

    &lt;input type=&quot;submit&quot; value=&quot;删除&quot;&gt;
    &lt;/form:form&gt;
    &lt;form:form action=&quot;FormDemo/testMethod&quot; method=&quot;put&quot;&gt;

    &lt;input type=&quot;submit&quot; value=&quot;修改&quot;&gt;
    &lt;/form:form&gt;
    &lt;form:form action=&quot;FormDemo/testMethod&quot; method=&quot;get&quot;&gt;

    &lt;input type=&quot;submit&quot; value=&quot;查询&quot;&gt;
    &lt;/form:form&gt;
    ```
    ```java
    @RequestMapping(value = &quot;/testMethod&quot;,method = RequestMethod.POST)
    public String testPost(){
        System.out.println(&quot;post&quot;);
        return &quot;/index.jsp&quot;;
    }
    @RequestMapping(value = &quot;/testMethod&quot;,method = RequestMethod.DELETE)
    public String testDelete(){
        System.out.println(&quot;delete&quot;);
        return &quot;/index.jsp&quot;;
    }

    @RequestMapping(value = &quot;/testMethod&quot;,method =RequestMethod.PUT)
    public String testPut(){
        System.out.println(&quot;put&quot;);
        return &quot;/index.jsp&quot;;
    }
    @RequestMapping(value = &quot;/testMethod&quot;,method = RequestMethod.GET)
    public String testGet(){
        System.out.println(&quot;get&quot;);
        return &quot;/index.jsp&quot;;
    }

    ```
2. 配置过滤器
    ```xml
    &lt;!--增加过滤器 支持delete和put请求--&gt;
    &lt;filter&gt;
        &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;org.springframework.web.filter.HiddenHttpMethodFilter&lt;/filter-class&gt;
    &lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
    ```
HiddenHttpMethodFilter会将全部请求中名为&quot;method&quot;的隐藏域进行Put|Delete处理

可以配置

</code></pre>

<p>xml
 <filter>
    <filter-name>HiddenHttpMethodFilter</filter-name>
    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
    <init-param>
        <param-name>methodParam</param-name>
        <param-value>myMethod</param-value>
    </init-param>
</filter></p>

<pre><code>指定要处理的隐藏的名字

</code></pre>

<p>html
<form action="FormDemo/testMethod" method="post">
    <input type="hidden" name="myMethod" value="delete">
    <input type="submit" value="修改">
</form></p>

<pre><code>
如果是使用的是SpringMvc标签：

    method=&quot;put|delete&quot;
如果不是SpringMVC标签，是传统的htnl标签

    method=&quot;post&quot;
    &lt;input type=&quot;hidden&quot; name=&quot;myMethod&quot; value=&quot;delete|put&quot;&gt;

#### checkbox

    自动绑定request域中的值
1. 通过boolean值绑定

</code></pre>

<p>java
@RequestMapping(&ldquo;/testForm2&rdquo;)
public String testForm2(Map<String,Object> map){
    Persion per = new Persion();
    //per.setAge(23);
    //per.setName(&ldquo;zs&rdquo;);
    per.setSex(false);
    map.put(&ldquo;per&rdquo;, per);
    return &ldquo;springForm&rdquo;;
    //return &ldquo;forward:/views/springForm.jsp&rdquo;;
}</p>

<pre><code></code></pre>

<p>html
<form:form commandName="per" action="textForm2">
    <for:checkbox path="sex"/>
    <input type="submit" value="提交">
<a href="/form:form">/form:form</a></p>

<pre><code>绑定集合（有值的打上勾）

</code></pre>

<p>java
@RequestMapping(&ldquo;/testForm3&rdquo;)
public String testForm3(Map<String,Object> map){
    Persion per = new Persion();
    List<String> hobbirs=new ArrayList&lt;&gt;();
    hobbirs.add(&ldquo;football&rdquo;);
    hobbirs.add(&ldquo;basketball&rdquo;);
    per.setHobbies(hobbirs);
    map.put(&ldquo;per&rdquo;, per);//将per放入了request域中
    return &ldquo;springForm&rdquo;;
}</p>

<pre><code></code></pre>

<p>html
<form:form commandName="per" action="textForm3">
    <form:checkbox path="hobbies" value="football"><a href="/form:checkbox">/form:checkbox</a>
    <form:checkbox path="hobbies" value="basketball"><a href="/form:checkbox">/form:checkbox</a>
    <form:checkbox path="hobbies" value="pingpang"><a href="/form:checkbox">/form:checkbox</a>
    <input type="submit" value="提交">
<a href="/form:form">/form:form</a></p>

<pre><code>(了解）嵌套对象的toString（）返回值
</code></pre>

<p>java
@RequestMapping(&ldquo;/testForm4&rdquo;)
public String testForm4(Map<String,Object> map){
    Persion per = new Persion();
    Other other = new Other();
    per.setOther(other);
    map.put(&ldquo;per&rdquo;, per);//将per放入了request域中
    return &ldquo;springForm&rdquo;;
}</p>

<pre><code></code></pre>

<p>html
<form:form commandName="per" action="textForm">
    <form:checkbox path="other" value="football"><a href="/form:checkbox">/form:checkbox</a>
    <form:checkbox path="other" value="basketball"><a href="/form:checkbox">/form:checkbox</a>
    <form:checkbox path="other" value="pingpang"><a href="/form:checkbox">/form:checkbox</a>
    <input type="submit" value="提交">
<a href="/form:form">/form:form</a></p>

<pre><code></code></pre>

<p>java
public class Other {
    @Override
    public String toString() {
        return &ldquo;pingpang&rdquo;;
    }
}</p>

<pre><code>
path:选中的选项（选中）

item:所有的选项  a,b ,c d：如果是list，set，数组，则标签名默认就是选项值，如果想自定义标签名需要使用map

</code></pre>

<p>java
@RequestMapping(&ldquo;/testForm5&rdquo;)
public String testForm5(Map<String,Object> map){</p>

<pre><code>Persion per = new Persion();
List&lt;String&gt; hobbies=new ArrayList&lt;&gt;();
hobbies.add(&quot;football&quot;);
hobbies.add(&quot;basketball&quot;);
per.setHobbies(hobbies);
map.put(&quot;per&quot;, per);//将per放入了request域中

List&lt;String&gt; allHobbies=new ArrayList&lt;&gt;();
allHobbies.add(&quot;football&quot;);
allHobbies.add(&quot;basketball&quot;);
allHobbies.add(&quot;pingpang&quot;);
allHobbies.add(&quot;aaa&quot;);
allHobbies.add(&quot;bbb&quot;);
map.put(&quot;allHobbies&quot;, allHobbies);
return &quot;springForm&quot;;
</code></pre>

<p>}</p>

<pre><code></code></pre>

<p>html
<form:form commandName="per" action="textForm">
    <form:checkboxes path="hobbies" items="${allHobbies}"/>
    <input type="submit" value="提交">
<a href="/form:form">/form:form</a></p>

<pre><code>加载所有的选项allHobbies并且选中选中的hobbies

指定标签名

可以通过   `Map&lt;Value值，标签名&gt;`


</code></pre>

<p>java
Map<String, String> allHobbiesMap = new HashMap&lt;&gt;();
allHobbiesMap.put(&ldquo;football&rdquo;,&ldquo;足球&rdquo;);
allHobbiesMap.put(&ldquo;basketball&rdquo;,&ldquo;篮球&rdquo;);
allHobbiesMap.put(&ldquo;pingpang&rdquo;,&ldquo;乒乓球&rdquo;);
allHobbiesMap.put(&ldquo;aaa&rdquo;,&ldquo;bbb&rdquo;);
map.put(&ldquo;allHobbies&rdquo;, allHobbiesMap);</p>

<pre><code>
#### 单选按钮

</code></pre>

<p>java
@RequestMapping(&ldquo;/testForm6&rdquo;)
public String testForm6(Map<String,Object> map){
    Persion per = new Persion();
    per.setCountry(&ldquo;China&rdquo;);
    map.put(&ldquo;per&rdquo;, per);//将per放入了request域中
    return &ldquo;springForm&rdquo;;
}</p>

<pre><code></code></pre>

<p>html
<form:form commandName="per" action="textForm">
   中国：<form:radiobutton path="country" value="China"/>
   美国：<form:radiobutton path="country" value="USE"/>
    <input type="submit" value="提交">
<a href="/form:form">/form:form</a></p>

<pre><code>一批

</code></pre>

<p>java
@RequestMapping(&ldquo;/testForm7&rdquo;)
public String testForm7(Map<String,Object> map){
    Persion per = new Persion();
    per.setFavouriteBall(&ldquo;pingpang&rdquo;);
    map.put(&ldquo;per&rdquo;, per);//将per放入了request域中
    Map<String, String> allHobbiesMap = new HashMap&lt;&gt;();
    allHobbiesMap.put(&ldquo;football&rdquo;,&ldquo;足球&rdquo;);
    allHobbiesMap.put(&ldquo;basketball&rdquo;,&ldquo;篮球&rdquo;);
    allHobbiesMap.put(&ldquo;pingpang&rdquo;,&ldquo;乒乓球&rdquo;);
    allHobbiesMap.put(&ldquo;aaa&rdquo;,&ldquo;bbb&rdquo;);
    map.put(&ldquo;allBallMap&rdquo;, allHobbiesMap);
    return &ldquo;springForm&rdquo;;
}</p>

<pre><code>
</code></pre>

<p><form:form commandName="per" action="textForm">
    <form:radiobuttons path="favouriteBall" items="${allBallMap}"/>
    <input type="submit" value="提交">
<a href="/form:form">/form:form</a></p>

<pre><code>属性`delimiter`可以指定选项与选项之间的分隔符


    &lt;form:radiobuttons path=&quot;favouriteBall&quot; items=&quot;${allBallMap}&quot; delimiter=&quot;、&quot;/&gt;

#### select
写法一
</code></pre>

<p>html
<form:form commandName="per" action="textForm">
    <form:select path="favouriteBall" items="${allBallMap}"/>
    <input type="submit" value="提交">
<a href="/form:form">/form:form</a></p>

<pre><code>写法二：指定选定的值，选项是自己写的，后端不传所有的选项只传favouriteBall
</code></pre>

<p>html
<form:form commandName="per" action="textForm">
    <form:select path="favouriteBall">
        <form:option value="football">足球11<a href="/form:option">/form:option</a>
        <form:option value="basketball">篮球11<a href="/form:option">/form:option</a>
        <form:option value="pingpang">乒乓球11<a href="/form:option">/form:option</a>
        <form:option value="aaa">bbb11<a href="/form:option">/form:option</a>
    <a href="/form:select">/form:select</a>
    <input type="submit" value="提交">
<a href="/form:form">/form:form</a></p>

<pre><code>写法三
</code></pre>

<p>html
<form:form commandName="per" action="textForm">
    <form:select path="favouriteBall">
        <form:options items="${allBallMap}"><a href="/form:options">/form:options</a>
       &lt;%&ndash; <form:option value="football">足球11<a href="/form:option">/form:option</a>
        <form:option value="basketball">篮球11<a href="/form:option">/form:option</a>
        <form:option value="pingpang">乒乓球11<a href="/form:option">/form:option</a>
        <form:option value="aaa">bbb11<a href="/form:option">/form:option</a>&ndash;%&gt;
    <a href="/form:select">/form:select</a>
    <input type="submit" value="提交">
<a href="/form:form">/form:form</a></p>

<pre><code></code></pre>

<p>java
@RequestMapping(&ldquo;/testForm7&rdquo;)
public String testForm7(Map<String,Object> map){
    Persion per = new Persion();
    per.setFavouriteBall(&ldquo;pingpang&rdquo;);
    map.put(&ldquo;per&rdquo;, per);//将per放入了request域中
    Map<String, String> allHobbiesMap = new HashMap&lt;&gt;();
    allHobbiesMap.put(&ldquo;football&rdquo;,&ldquo;足球&rdquo;);
    allHobbiesMap.put(&ldquo;basketball&rdquo;,&ldquo;篮球&rdquo;);
    allHobbiesMap.put(&ldquo;pingpang&rdquo;,&ldquo;乒乓球&rdquo;);
    allHobbiesMap.put(&ldquo;aaa&rdquo;,&ldquo;bbb&rdquo;);
    map.put(&ldquo;allBallMap&rdquo;, allHobbiesMap);
    return &ldquo;springForm&rdquo;;
}
```
如果方式三和方式二同时存在则会优先选择方式二</p>

<p>如果方式一和方式二同时存在则会优先选择一</p>

<p>如果普通方式和springmvc方式同时存在则会使用springmvc的方式，普通的option没有匹配的功能。</p>

<p><a href="https://github.com/mumulx/Project-source-code/tree/master/springMVC/MVCTag">git源码</a></p>

    </div>
    <div class="article-footer">
<blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接: </strong>
      <a href="https://mumulx.github.io/2019/11/springmvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="SpringMVC自学笔记" target="_blank" rel="external">https://mumulx.github.io/2019/11/springmvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</a>
    </li>
    <li class="post-copyright-license">
      <strong>License：</strong><a href="https://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN</a>
    </li>
  </ul>
</blockquote>

<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/mumulx" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="https://mumulx.github.io/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/mumulx" target="_blank"><span class="text-dark">木木就是两个木</span><small class="ml-1x">木木</small></a></h3>
        <div>愿生活不太拥挤，愿笑容不必刻意。</div>
      </div>
    </figure>
  </div>
</div>
    </div>
  </article>
<section id="comments">
</section>

</div><nav class="bar bar-footer clearfix" data-stick-bottom>
    <div class="bar-inner">
        <ul class="pager pull-left">
            <li class="prev">
                <a href="https://mumulx.github.io/2019/11/spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Spring自学笔记-01"><i
                        class="icon icon-angle-left"
                        aria-hidden="true"></i><span>&nbsp;&nbsp;下一篇</span></a>
            </li>
            <li class="next">
                <a href="https://mumulx.github.io/2019/11/spring-boot%E7%AC%94%E8%AE%B0/"
                    title="Spring Boot自学笔记-02"><span>上一篇&nbsp;&nbsp;</span><i
                        class="icon icon-angle-right" aria-hidden="true"></i></a>
            </li>
            
            <li class="toggle-toc">
                <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false"
                    title="文章目录" role="button">
                    <span>[&nbsp;</span><span>文章目录</span>
                    <i class="text-collapsed icon icon-anchor"></i>
                    <i class="text-in icon icon-close"></i>
                    <span>]</span>
                </a>
            </li>
        </ul>
        
        <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal"
            data-target="#donateModal"><span>赏</span></button>
        
        <div class="bar-right">
            <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter"
                data-mobile-sites="weibo,qq,qzone"></div>
        </div>
    </div>
</nav>


<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content donate">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                    aria-hidden="true">&times;</span></button>
            <div class="modal-body">
                <div class="donate-box">
                    <div class="donate-head">
                        <p>感谢您的支持,我会继续努力的!</p>
                    </div>
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane fade active in" id="alipay">
                            <div class="donate-payimg">
                                <img src="https://mumulx.github.io/donate/alipayimg.png"
                                    alt="扫码支持" title="扫一扫" />
                            </div>
                            <p class="text-muted mv">扫码打赏, 多少你说了算~</p>
                            <p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦~</p>
                        </div>
                        <div role="tabpanel" class="tab-pane fade" id="wechatpay">
                            <div class="donate-payimg">
                                <img src="https://mumulx.github.io/donate/wechatpayimg.png"
                                    alt="扫码支持" title="扫一扫" />
                            </div>
                            <p class="text-muted mv">扫码打赏, 多少你说了算~</p>
                            <p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p>
                        </div>
                    </div>
                    <div class="donate-footer">
                        <ul class="nav nav-tabs nav-justified" role="tablist">
                            <li role="presentation" class="active">
                                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay"
                                    aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
                            </li>
                            <li role="presentation" class="">
                                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab"
                                    aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i>
                                    微信支付</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</main><footer class="footer" itemscope itemtype="https://schema.org/WPFooter">
<ul class="social-links">
    <li><a href="https://github.com/mumulx" target="_blank" title="github" data-toggle=tooltip data-placement=top >
            <i class="icon icon-github"></i></a></li>
    <li><a href="https://mumulx.github.io/index.xml" target="_blank" title="rss" data-toggle=tooltip data-placement=top >
            <i class="icon icon-rss"></i></a></li>
    <li><a href="https://weibo.com/u/5459389722" target="_blank" title="weibo" data-toggle=tooltip data-placement=top >
            <i class="icon icon-weibo"></i></a></li>
</ul>
  <div class="copyright">
    &copy;2019  -
    2020
    <div class="publishby">
        联系邮箱：<a target="_blank" title="木木的邮箱"> 1819778796@qq.com </a>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
            showMathMenu: false, //disables context menu
            tex2jax: {
            inlineMath: [ ['$','$'], ['\\(','\\)'] ]
           }
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script>
   window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/highlight.min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/rust.min.js"></script>
<script type="text/javascript"
   src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script>
hljs.configure({
  tabReplace: '    ', 
  classPrefix: ''     
                      
})
hljs.initHighlightingOnLoad();
</script>
<script type="text/javascript" src="https://mumulx.github.io/js/application.js"></script>
<script type="text/javascript" src="https://mumulx.github.io/js/plugin.js"></script>
<script>
      (function (window) {
          var INSIGHT_CONFIG = {
              TRANSLATION: {
                  POSTS: '文章',
                  PAGES: '页面',
                  CATEGORIES: '分类',
                  TAGS: '标签',
                  UNTITLED: '(未命名)',
              },
              ROOT_URL: 'https:\/\/mumulx.github.io\/',
              CONTENT_URL: 'https:\/\/mumulx.github.io\/\/searchindex.json ',
          };
          window.INSIGHT_CONFIG = INSIGHT_CONFIG;
      })(window);
      </script>
<script type="text/javascript" src="https://mumulx.github.io/js/insight.js"></script>


<script src="https://cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: '1ccf8dc9e86b3575cfb2',
        clientSecret: '048ae422c4a6207a4e89c58ba1d4ebf820136bb0',
        repo: 'gittalk',
        owner: 'mumulx',
        admin: ['mumulx'],
        id: md5(location.pathname),
        distractionFreeMode: true
    });
    gitalk.render('comments');
</script>

  </body>
</html>
